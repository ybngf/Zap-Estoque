<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Verificar api.php</title>
    <style>
        body { font-family: monospace; background: #000; color: #0f0; padding: 20px; }
        h1 { color: #ff0; }
        .success { color: #0f0; }
        .error { color: #f00; }
        pre { background: #111; padding: 10px; }
    </style>
</head>
<body>
    <h1>üîç Verificar se api.php tem as fun√ß√µes formatter</h1>
    
    <button onclick="testApi()">‚ñ∂ Testar API</button>
    <button onclick="checkApiFile()">‚ñ∂ Verificar C√≥digo do api.php</button>
    
    <div id="result"></div>
    
    <script>
        async function testApi() {
            const result = document.getElementById('result');
            result.innerHTML = '<p>Testando...</p>';
            
            try {
                const response = await fetch('/EstoqueGemini/api/products');
                const data = await response.json();
                
                let html = '<h2>Resposta da API:</h2>';
                html += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                if (data.length > 0) {
                    const first = data[0];
                    html += '<h2>Verifica√ß√£o de Tipos:</h2>';
                    html += '<pre>';
                    html += 'price: ' + typeof first.price + ' = ' + first.price + '\n';
                    html += 'stock: ' + typeof first.stock + ' = ' + first.stock + '\n';
                    html += 'categoryId: ' + typeof first.categoryId + ' = ' + first.categoryId + '\n';
                    html += '</pre>';
                    
                    if (typeof first.price === 'number') {
                        html += '<p class="success">‚úÖ PRICE √â NUMBER - API.PHP EST√Å CORRETO!</p>';
                    } else {
                        html += '<p class="error">‚ùå PRICE √â STRING - API.PHP N√ÉO FOI ATUALIZADO!</p>';
                        html += '<p class="error">Voc√™ precisa fazer upload do api.php atualizado!</p>';
                    }
                }
                
                result.innerHTML = html;
                
            } catch (error) {
                result.innerHTML = '<p class="error">Erro: ' + error.message + '</p>';
            }
        }
        
        async function checkApiFile() {
            const result = document.getElementById('result');
            result.innerHTML = '<h2>‚ö†Ô∏è N√£o √© poss√≠vel ler o c√≥digo PHP diretamente</h2>';
            result.innerHTML += '<p>Mas voc√™ pode verificar manualmente:</p>';
            result.innerHTML += '<ol>';
            result.innerHTML += '<li>Abra seu gerenciador de arquivos do cPanel</li>';
            result.innerHTML += '<li>Navegue at√©: EstoqueGemini/api.php</li>';
            result.innerHTML += '<li>Abra o arquivo e procure por: <code>function formatProduct</code></li>';
            result.innerHTML += '<li>Se a fun√ß√£o existir, o arquivo est√° correto</li>';
            result.innerHTML += '<li>Se n√£o existir, voc√™ precisa fazer upload do novo api.php</li>';
            result.innerHTML += '</ol>';
        }
    </script>
</body>
</html>
